<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>KayÄ±t Ol</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body.dark-mode {
      background-color: #121212;
      color: #fff;
    }
    body.dark-mode .form-control {
      background-color: #1e1e1e;
      color: #fff;
      border-color: #444;
    }
    body.dark-mode .btn-primary {
      background-color: #333;
      border-color: #555;
    }
    #errorMessages {
      color: #dc3545;
      margin-bottom: 15px;
      white-space: pre-line;
    }
    /* GÃ¶z ikonu stilleri */
    .input-icon-wrapper {
      position: relative;
    }
    .input-icon-wrapper input {
      padding-right: 2.5rem;
    }
    .toggle-password, .calendar-icon {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      right: 0.75rem;
      cursor: pointer;
      font-size: 1.25rem;
      user-select: none;
      transition: color 0.3s ease;
    }
    /* Normal mod ikon rengi */
    .toggle-password,
    .calendar-icon {
      color: #000;
    }
    /* Koyu mod ikon rengi */
    body.dark-mode .toggle-password,
    body.dark-mode .calendar-icon {
      color: #fff;
    }
  </style>
  <!-- Bootstrap Icons CDN (gÃ¶z ve takvim iconlarÄ± iÃ§in) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
</head>
<body class="p-4">
  <div class="container" style="max-width: 500px;">
    <h2 class="mb-4">KayÄ±t Ol</h2>

    <div id="errorMessages"></div>

    <form id="registerForm" novalidate>
      <div class="mb-3">
        <label for="kullaniciAdi" class="form-label">KullanÄ±cÄ± AdÄ±</label>
        <input type="text" id="kullaniciAdi" class="form-control" required minlength="5" />
      </div>

      <div class="mb-3">
        <label for="email" class="form-label">E-posta</label>
        <input type="email" id="email" class="form-control" required />
      </div>

      <div class="mb-3 input-icon-wrapper">
        <label for="sifre" class="form-label">Åifre</label>
        <div id="passwordInfo" style="color:#3c99eb; font-size: 0.9rem; margin-bottom: 0.3rem;">
          Åifre 6-15 karakter, en az 1 bÃ¼yÃ¼k harf ve 1 Ã¶zel karakter iÃ§ermelidir.
        </div>
        <input type="password" id="sifre" class="form-control" required minlength="6" maxlength="15" />
      </div>

      <div class="mb-3 input-icon-wrapper">
        <label for="dogumGunu" class="form-label">DoÄŸum GÃ¼nÃ¼</label>
        <input type="date" id="dogumGunu" class="form-control" required />
      </div>
      <div class="mb-3">
        <label for="cinsiyet" class="form-label">Cinsiyet</label>
        <select id="cinsiyet" class="form-select" required>
          <option value="" disabled selected>SeÃ§iniz</option>
          <option value="erkek">Erkek</option>
          <option value="kadin">KadÄ±n</option>
          <option value="diger">DiÄŸer</option>
        </select>
      </div>

      <button type="submit" class="btn btn-primary w-100">KayÄ±t Ol</button>
    </form>

    <div class="text-center mt-3">
      <a href="login.html">GiriÅŸ Yap</a>
    </div>
    <div class="mt-3 d-flex justify-content-center">
      <button id="darkModeBtn" class="btn btn-secondary">ğŸŒ™ Koyu Mod</button>
    </div>
  </div>

  <script>
    // Koyu mod baÅŸlangÄ±Ã§ kontrolÃ¼
    const darkModeBtn = document.getElementById('darkModeBtn');
    if (localStorage.getItem('darkMode') === 'true') {
      document.body.classList.add('dark-mode');
      darkModeBtn.textContent = 'â˜€ï¸ AÃ§Ä±k Mod';
    }
    darkModeBtn.onclick = () => {
      document.body.classList.toggle('dark-mode');
      const isDark = document.body.classList.contains('dark-mode');
      localStorage.setItem('darkMode', isDark);
      darkModeBtn.textContent = isDark ? 'â˜€ï¸ AÃ§Ä±k Mod' : 'ğŸŒ™ Koyu Mod';
    };

    // Åifre input ve bilgi yazÄ±sÄ±
    const sifreInput = document.getElementById('sifre');
    const passwordInfo = document.getElementById('passwordInfo');
    const errorMessagesDiv = document.getElementById('errorMessages');

    sifreInput.addEventListener('input', () => {
      if (sifreInput.value.length > 0) {
        passwordInfo.style.display = 'none';
      } else {
        passwordInfo.style.display = 'block';
      }
    });


    // Form validasyon ve submit iÅŸlemi
    document.getElementById('registerForm').addEventListener('submit', function(event) {
      event.preventDefault();
      errorMessagesDiv.textContent = ''; // Ã–nceki mesajlarÄ± temizle

      const kullaniciAdi = document.getElementById('kullaniciAdi').value.trim();
      const email = document.getElementById('email').value.trim();
      const sifre = sifreInput.value;
      const dogumGunu = dogumGunuInput.value;
      const cinsiyet = document.getElementById('cinsiyet').value;

      let errors = [];

      // KullanÄ±cÄ± adÄ± validasyonu
      if (kullaniciAdi === '') {
        errors.push('KullanÄ±cÄ± adÄ± boÅŸ olamaz.');
      }
      if (kullaniciAdi.length < 5) {
        errors.push('KullanÄ±cÄ± adÄ± en az 5 karakter olmalÄ±dÄ±r.');
      }

      // Email validasyonu
      if (email === '') {
        errors.push('E-posta boÅŸ olamaz.');
      } else if (!email.includes('@')) {
        errors.push('GeÃ§erli bir e-posta adresi giriniz.');
      }

      // Åifre validasyonu - tÃ¼m hatalar toplanÄ±yor
      if (sifre === '') {
        errors.push('Åifre boÅŸ olamaz.');
      } else {
        if (sifre.length < 6 || sifre.length > 15) {
          errors.push('Åifre 6 ile 15 karakter arasÄ±nda olmalÄ±dÄ±r.');
        }
        if (!/[A-Z]/.test(sifre)) {
          errors.push('Åifre en az bir bÃ¼yÃ¼k harf iÃ§ermelidir.');
        }
        if (!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/.test(sifre)) {
          errors.push('Åifre en az bir Ã¶zel karakter iÃ§ermelidir.');
        }
      }

      // DoÄŸum gÃ¼nÃ¼ validasyonu
      if (!dogumGunu) {
        errors.push('DoÄŸum gÃ¼nÃ¼ seÃ§iniz.');
      }

      // Cinsiyet validasyonu
      if (!cinsiyet) {
        errors.push('Cinsiyet seÃ§iniz.');
      }

      if (errors.length > 0) {
        errorMessagesDiv.textContent = errors.join('\n');
        window.scrollTo({ top: 0, behavior: 'smooth' });
        return;
      }

      // KayÄ±t baÅŸarÄ±lÄ± mesajÄ±
      alert(
        `KayÄ±t baÅŸarÄ±lÄ±!\n\n` +
        `KullanÄ±cÄ± AdÄ±: ${kullaniciAdi}\n` +
        `E-posta: ${email}\n` +
        `DoÄŸum GÃ¼nÃ¼: ${dogumGunu}\n` +
        `Cinsiyet: ${cinsiyet}`
      );

      // KullanÄ±cÄ±yÄ± localStorage'a kaydet (Ã¶rnek)
      localStorage.setItem('loggedInUser', kullaniciAdi);

      // Ana sayfaya yÃ¶nlendir
      window.location.href = 'index.html';
    });
  </script>
</body>
</html>